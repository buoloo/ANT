(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9531],{34687:function(S){S.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},80979:function(S,T,a){"use strict";a.r(T),a.d(T,{default:function(){return _}});var te=a(18106),F=a(60561),ie=a(34792),y=a(48086),o=a(39428),f=a(11849),v=a(3182),N=a(2824),ue=a(17462),D=a(76772),E=a(70738),W=a(36571),r=a(25377);function G(Z,p){return C.apply(this,arguments)}function C(){return C=(0,v.Z)((0,o.Z)().mark(function Z(p,m){return(0,o.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,r.WY)("/api/login/captcha",(0,f.Z)({method:"GET",params:(0,f.Z)({},p)},m||{})));case 1:case"end":return h.stop()}},Z)})),C.apply(this,arguments)}var R=a(36108),Y=a(48107),K=a(39464),V=a(89366),P=a(2603),J=a(29985),Q=a(95073),B=a(47745),X=a(89128),w=a(38657),I=a(67294),k=a(34687),g=a.n(k),e=a(85893),A=function(p){var m=p.content;return(0,e.jsx)(D.Z,{style:{marginBottom:24},message:m,type:"error",showIcon:!0})},q=function(){var p=(0,I.useState)({}),m=(0,N.Z)(p,2),L=m[0],h=m[1],ee=(0,I.useState)("account"),O=(0,N.Z)(ee,2),x=O[0],ae=O[1],b=(0,r.tT)("@@initialState"),j=b.initialState,se=b.setInitialState,i=(0,r.YB)(),re=function(){var d=(0,v.Z)((0,o.Z)().mark(function t(){var u,l;return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,j==null||(u=j.fetchUserInfo)===null||u===void 0?void 0:u.call(j);case 2:if(l=s.sent,!l){s.next=6;break}return s.next=6,se(function(M){return(0,f.Z)((0,f.Z)({},M),{},{currentUser:l})});case 6:case"end":return s.stop()}},t)}));return function(){return d.apply(this,arguments)}}(),ne=function(){var d=(0,v.Z)((0,o.Z)().mark(function t(u){var l,c,s,M,z,$;return(0,o.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,W.x4)((0,f.Z)((0,f.Z)({},u),{},{type:x}));case 3:if(l=n.sent,l.status!=="ok"){n.next=15;break}return c=i.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),y.ZP.success(c),n.next=9,re();case 9:if(r.m8){n.next=11;break}return n.abrupt("return");case 11:return s=r.m8.location.query,M=s,z=M.redirect,r.m8.push(z||"/"),n.abrupt("return");case 15:console.log(l),h(l),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(0),$=i.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),y.ZP.error($);case 23:case"end":return n.stop()}},t,null,[[0,19]])}));return function(u){return d.apply(this,arguments)}}(),H=L.status,U=L.type;return(0,e.jsxs)("div",{className:g().container,children:[(0,e.jsx)("div",{className:g().lang,"data-lang":!0,children:r.pD&&(0,e.jsx)(r.pD,{})}),(0,e.jsx)("div",{className:g().content,children:(0,e.jsxs)(Q.U,{logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:i.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(r._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(R.Z,{className:g().icon},"AlipayCircleOutlined"),(0,e.jsx)(Y.Z,{className:g().icon},"TaobaoCircleOutlined"),(0,e.jsx)(K.Z,{className:g().icon},"WeiboCircleOutlined")],onFinish:function(){var d=(0,v.Z)((0,o.Z)().mark(function t(u){return(0,o.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ne(u);case 2:case"end":return c.stop()}},t)}));return function(t){return d.apply(this,arguments)}}(),children:[(0,e.jsxs)(F.Z,{activeKey:x,onChange:ae,children:[(0,e.jsx)(F.Z.TabPane,{tab:i.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,e.jsx)(F.Z.TabPane,{tab:i.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),H==="error"&&U==="account"&&(0,e.jsx)(A,{content:i.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),x==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(V.Z,{className:g().prefixIcon})},placeholder:i.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(r._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(B.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(P.Z,{className:g().prefixIcon})},placeholder:i.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(r._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),H==="error"&&U==="mobile"&&(0,e.jsx)(A,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),x==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(J.Z,{className:g().prefixIcon})},name:"mobile",placeholder:i.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(r._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(r._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(X.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(P.Z,{className:g().prefixIcon})},captchaProps:{size:"large"},placeholder:i.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(t,u){return t?"".concat(u," ").concat(i.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):i.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(r._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var d=(0,v.Z)((0,o.Z)().mark(function t(u){var l;return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,G({phone:u});case 2:if(l=s.sent,l!==!1){s.next=5;break}return s.abrupt("return");case 5:y.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return s.stop()}},t)}));return function(t){return d.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(w.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(r._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(r._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(E.Z,{})]})},_=q}}]);
